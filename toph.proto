syntax = "proto3";

package toph;

service AccountService {
  rpc Update(GRPCUpdateAccount) returns (GRPCAccount);
}

message GRPCAccount {
  string key = 1;
  string name = 2;
  string email = 3;
}

message GRPCUpdateAccount {
  string name = 1;
}

service SecurityService {
  rpc Authorise(GRPCAuthorisationRequest) returns (GRPCAuthorisationResponse);
}

message  GRPCAuthorisationRequest {
  oneof sealed_value {
    GRPCOpenIdTokenAuthorisationRequest openid = 1;
  }
}

message GRPCOpenIdTokenAuthorisationRequest {
  string version = 1;
  string provider = 2;
  bytes token = 3;
}

message  GRPCAuthorisationResponse {
  string version = 1;
  bytes token = 2;
}